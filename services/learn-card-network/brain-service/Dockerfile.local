ARG BASE_IMAGE=learncard-monorepo-local

FROM ${BASE_IMAGE}

# Skip native DIDKit build (local dev uses WASM fallback)
ENV SKIP_DIDKIT_NAPI=1

WORKDIR /app

# Install build dependencies and pnpm in one layer

# Copy everything over from the source directory to the build directory

# Expose common ports used by server
EXPOSE 3000

CMD ["sh", "-c", "cd services/learn-card-network/brain-service && pnpm dev"]
