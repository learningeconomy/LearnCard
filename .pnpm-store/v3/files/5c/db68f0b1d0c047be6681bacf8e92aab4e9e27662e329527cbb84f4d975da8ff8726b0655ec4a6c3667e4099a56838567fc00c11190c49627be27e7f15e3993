{"version":3,"sources":["focus-lock.tsx"],"names":["React","moveFocusInside","focusInside","mergeRefs","FocusGuard","active","width","height","padding","overflow","position","top","left","FocusLock","forwardRef","ref","onBlur","undefined","html","trap","useRef","trapFocus","current","setTimeout","document","activeElement","useEffect","e","relatedTarget","getAttribute"],"mappings":"0IAEA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,MAAOC,CAAAA,eAAP,EAA0BC,WAA1B,KAA6C,YAA7C,CACA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CAUA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,UAAGC,CAAAA,MAAH,MAAGA,MAAH,OACjB,4BACE,uBADF,CAEE,QAAQ,CAAEA,MAAM,CAAG,CAAH,CAAO,CAAC,CAF1B,CAGE,KAAK,CAAE,CACLC,KAAK,CAAE,CADF,CAELC,MAAM,CAAE,CAFH,CAGLC,OAAO,CAAE,CAHJ,CAILC,QAAQ,CAAE,QAJL,CAKLC,QAAQ,CAAE,OALL,CAMLC,GAAG,CAAE,CANA,CAOLC,IAAI,CAAE,CAPD,CAHT,EADiB,CAAnB,CAiBA,MAAO,IAAMC,CAAAA,SAAS,CAAGb,KAAK,CAACc,UAAN,CAGvB,eAAgDC,GAAhD,CAAwD,IAArDV,CAAAA,MAAqD,OAArDA,MAAqD,oBAA7CW,MAA6C,CAA7CA,OAA6C,uBAApC,iBAAMC,CAAAA,SAAN,CAAoC,cAAhBC,IAAgB,qDACxD,GAAMC,CAAAA,IAAI,CAAGnB,KAAK,CAACoB,MAAN,CAA6B,IAA7B,CAAb,CAGA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAIhB,MAAM,EAAI,CAACH,WAAW,CAACiB,IAAI,CAACG,OAAN,CAA1B,CAA0C,CACxCC,UAAU,CACR,iBAAMtB,CAAAA,eAAe,CAACkB,IAAI,CAACG,OAAN,CAAeE,QAAQ,CAACC,aAAxB,CAArB,CADQ,CAER,EAFQ,CAIX,CACF,CAPD,CASAzB,KAAK,CAAC0B,SAAN,CAAgBL,SAAhB,EAEA,MACE,yCACE,oBAAC,UAAD,EAAY,MAAM,CAAEhB,MAApB,EADF,CAEE,oCACE,GAAG,CAAEF,SAAS,CAAC,CAACgB,IAAD,CAAOJ,GAAP,CAAD,CADhB,EAEMG,IAFN,EAGE,MAAM,CAAE,gBAAAS,CAAC,CAAI,CACX,GACEA,CAAC,CAACC,aAAF,EACCD,CAAC,CAACC,aAAH,CAAiCC,YAAjC,CAA8C,kBAA9C,CAFF,CAGE,CACAR,SAAS,EACV,CAEDL,OAAM,CAACW,CAAD,CACP,CAZH,GAFF,CAgBE,oBAAC,UAAD,EAAY,MAAM,CAAEtB,MAApB,EAhBF,CAmBH,CAtCwB,CAAlB","sourcesContent":["/* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n\nimport * as React from 'react';\nimport moveFocusInside, { focusInside } from 'focus-lock';\nimport mergeRefs from 'react-merge-refs';\n\nimport { Element } from '..';\n\ninterface FocusLockProps {\n  /** Whether the lock is activated */\n  active: boolean;\n}\n\n/** A boundary for the focus lock */\nconst FocusGuard = ({ active }: FocusLockProps) => (\n  <div\n    data-focus-guard\n    tabIndex={active ? 0 : -1}\n    style={{\n      width: 1,\n      height: 0,\n      padding: 0,\n      overflow: 'hidden',\n      position: 'fixed',\n      top: 1,\n      left: 1\n    }}\n  />\n);\n\n/** Lock focus withing an area of the app */\nexport const FocusLock = React.forwardRef<\n  HTMLDivElement,\n  FocusLockProps & Element<'div'>\n>(({ active, onBlur = () => undefined, ...html }, ref) => {\n  const trap = React.useRef<HTMLDivElement>(null);\n\n  /** Trap the focus within the locks if active */\n  const trapFocus = () => {\n    if (active && !focusInside(trap.current)) {\n      setTimeout(\n        () => moveFocusInside(trap.current, document.activeElement),\n        50\n      );\n    }\n  };\n\n  React.useEffect(trapFocus);\n\n  return (\n    <>\n      <FocusGuard active={active} />\n      <div\n        ref={mergeRefs([trap, ref])}\n        {...html}\n        onBlur={e => {\n          if (\n            e.relatedTarget &&\n            (e.relatedTarget as HTMLElement).getAttribute('data-focus-guard')\n          ) {\n            trapFocus();\n          }\n\n          onBlur(e);\n        }}\n      />\n      <FocusGuard active={active} />\n    </>\n  );\n});\n"]}
