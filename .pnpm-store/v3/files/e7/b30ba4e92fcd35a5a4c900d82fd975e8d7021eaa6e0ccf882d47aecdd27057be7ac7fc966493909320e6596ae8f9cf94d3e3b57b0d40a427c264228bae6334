"use strict";var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var D=h(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.checkPath=y.checkPathSync=void 0;var N=require("fs"),de=require("path"),ve=e=>!!$(e);y.checkPathSync=ve;var he=async e=>!!$(e);y.checkPath=he;var $=e=>{let t=(0,de.parse)(e).dir;return t==""||(0,N.existsSync)(t)||(0,N.mkdirSync)(t,{recursive:!0}),(0,N.existsSync)(t)}});var E=h(m=>{"use strict";var _e=m&&m.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};Object.defineProperty(m,"__esModule",{value:!0});var pe=require("worker_threads"),ye=e=>{var{callback:t}=e,r=_e(e,["callback"]);return new Promise((s,n)=>{let i;new pe.Worker("./build/worker.js").once("message",a=>i=a).once("exit",a=>a==0?s(i):n(a)).once("error",a=>n(a)).once("messageerror",a=>n(a)).postMessage(r)}).then(s=>(t==null||t(s),s),s=>{throw new Error(s)})};m.default=ye});var Y=h(O=>{"use strict";var U=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});var B=U(require("fs")),X=D(),H=U(E()),we={load:async(e,t)=>{if(await(0,X.checkPath)(e)){let r=await B.default.promises.readFile(e);return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,X.checkPath)(e))await B.default.promises.writeFile(e,t),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:async(e,t)=>{let r=await(0,H.default)({method:5,path:e});return t==null||t(Buffer.from(r)),Buffer.from(r)},saveW:async(e,t,r)=>{let s=new Uint8Array(new SharedArrayBuffer(t.byteLength));s.set(t),await(0,H.default)({method:6,path:e,data:s,callback:r})}};O.default=we});var W=h(P=>{"use strict";var G=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});var q=G(require("fs")),M=D(),z=G(E()),Se={loadS:e=>{if((0,M.checkPathSync)(e))return q.default.readFileSync(e,"utf8");throw new Error(`Can't read from ${e}`)},saveS:(e,t)=>{if((0,M.checkPathSync)(e))q.default.writeFileSync(e,t,"utf8");else throw new Error(`Can't write to ${e}`)},load:async(e,t)=>{if(await(0,M.checkPath)(e)){let r=await q.default.promises.readFile(e,"utf8");return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,M.checkPath)(e))await q.default.promises.writeFile(e,t,"utf8"),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:(e,t)=>(0,z.default)({method:0,path:e,callback:t}),saveW:(e,t,r)=>(0,z.default)({method:1,path:e,data:t,callback:r})};P.default=Se});var F=h(g=>{"use strict";var V=g&&g.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(g,"__esModule",{value:!0});var w=V(W()),K=V(E()),me={loadS:(e,t=!1)=>JSON.parse(t?Q(w.default.loadS(e)):w.default.loadS(e)),saveS:(e,t)=>w.default.saveS(e,JSON.stringify(t)),load:async(e,t,r=!1)=>{let s=JSON.parse(r?Q(await w.default.load(e)):await w.default.load(e));return t==null||t(s),s},save:async(e,t,r)=>{await w.default.save(e,JSON.stringify(t)),r==null||r()},loadW:(e,t,r=!1)=>(0,K.default)({method:r?3:2,path:e,callback:t}),saveW:(e,t,r)=>(0,K.default)({method:4,path:e,data:t,callback:r})};g.default=me;function Q(e){let t=(o,d)=>{let c=0;for(;o[d]==="\\";)d--,c++;return!(c%2)},r=!1,s=!1,n=!1,i=0,a="";for(let o=0;o<e.length;o++){let d=e[o]||"",c=e[o+1]||"",f=!(n||s);if(f&&d==='"'&&t(e,o-1)&&(r=!r),r)continue;let p=d+c;if(f&&p==="//")a+=e.slice(i,o),i=o,s=!0,o++;else if(s&&p===`\r
`){o++,s=!1,i=o;continue}else if(s&&d===`
`)s=!1,i=o;else if(f&&p==="/*"){a+=e.slice(i,o),i=o,n=!0,o++;continue}else if(n&&p==="*/"){o++,n=!1,i=o+1;continue}}return(a+(n||s?"":e.slice(i))).replace(/,(?!\s*?[{["'\w])/g,"")}});var ne=h(k=>{"use strict";var R=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k,"__esModule",{value:!0});var A=R(require("fs")),l=R(require("path")),te=R(require("os"));function Oe(e){let t=Object.assign({cwd:process.cwd(),relative:!0},typeof e=="string"?{cwd:e}:e),r=[],s=t.cwd,n,i=!1;do if(s.charAt(0)==="~"&&(s=se(s)),s.charAt(0)==="@"&&(s=l.default.join(Z||(Z=j?l.default.resolve(u||(u=ee()),"node_modules"):l.default.resolve(u||(u=ee()),"lib/node_modules")),s.slice(1))),n=re(s),n){let a=t.relative?l.default.relative(t.cwd,n):n;i=r.indexOf(a)>-1,i||(r.push(a),s=l.default.join(n,"../../"))}while(n&&!i);return r}k.default=Oe;function re(e){let t=l.default.resolve(e,"node_modules"),r=A.default.existsSync(t)?l.default.resolve(t):null;if(r)return r;let s=l.default.dirname(e);return s===e?null:re(s)}var Z,u;function ee(){if(process.env.PREFIX)u=process.env.PREFIX;else if(u=I(l.default.resolve(te.default.homedir(),".npmrc")),!u){try{u=I(l.default.resolve(ge(),"..","..","npmrc")),u&&(u=I(l.default.resolve(u,"etc","npmrc"))||u)}catch{}u||(j?u=process.env.APPDATA?l.default.join(process.env.APPDATA,"npm"):l.default.dirname(process.execPath):(u=l.default.dirname(l.default.dirname(process.execPath)),process.env.DESTDIR&&(u=l.default.join(process.env.DESTDIR,u))))}return u?se(u):""}function I(e){var t;try{return(t=Pe(A.default.readFileSync(e,"utf-8")))===null||t===void 0?void 0:t.prefix}catch{return null}}function Pe(e){let t=Object.create(null),r=t,s=null;for(let i of e.split(/[\r\n]+/g)){if(!i||i.match(/^\s*[;#]/))continue;let a=i.match(/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i);if(!a)continue;if(a[1]!==void 0){if(s=L(a[1]),s==="__proto__"){r=Object.create(null);continue}r=t[s]=t[s]||Object.create(null);continue}let o=L(a[2]||""),d=o.length>2&&o.slice(-2)==="[]",c=d?o.slice(0,-2):o;if(c==="__proto__")continue;let f=a[3]?L(a[4]||""):!0,p=f==="true"||f==="false"||f==="null"?JSON.parse(f):f;d&&(Object.hasOwnProperty.call(r,c)?Array.isArray(r[c])||(r[c]=[r[c]]):r[c]=[]),Array.isArray(r[c])?r[c].push(p):r[c]=p}let n=[];for(let i of Object.keys(t)){if(!Object.hasOwnProperty.call(t,i)||typeof t[i]!="object"||Array.isArray(t[i]))continue;let a=i.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(f=>f.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")),o=t,d=a.pop()||"",c=d.replace(/\\\./g,".");for(let f of a)f!=="__proto__"&&((!Object.hasOwnProperty.call(o,f)||typeof o[f]!="object")&&(o[f]=Object.create(null)),o=o[f]);o===t&&c===d||(o[c]=t[i],n.push(i))}return n.forEach(i=>delete t[i]),t}function L(e){e=e.trim();let t=e.charAt(0),r=e.charAt(e.length-1);if(t==='"'&&r==='"'||t==="'"&&r==="'"){e=t==="'"?e.substr(1,e.length-2):e;try{return JSON.parse(e)}catch{}}else{let s=!1,n="";for(let i=0;i<e.length;i++){let a=e.charAt(i);if(s)"\\;#".indexOf(a)!==-1?n+=a:n+="\\"+a,s=!1;else{if(";#".indexOf(a)!==-1)break;a==="\\"?s=!0:n+=a}}return s&&(n+="\\"),n.trim()}return e}var se=e=>e.charAt(0)==="~"?e.charAt(1)==="+"?l.default.join(process.cwd(),e.slice(2)):l.default.join(te.default.homedir(),e.slice(1)):e,j=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys";function ge(){let e=(process.env.PATH||"").split(j?";":":"),t=[""];j&&(e.unshift(process.cwd()),t=(process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(";"));for(let r of e){let s=l.default.join(r.charAt(0)==='"'&&r.slice(-1)==='"'?r.slice(1,-1):r,"npm");for(let n of t)if(Ae(s+n))return A.default.realpathSync(s+n)}throw new Error("Can't find npm file")}function Ae(e){try{return(j?t=>{let r=A.default.statSync(t);if(!r.isSymbolicLink()&&!r.isFile())return!1;if(!process.env.PATHEXT)return!0;let s=process.env.PATHEXT.split(";");if(s.indexOf("")!==-1)return!0;for(let n of s){let i=n.toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}:t=>{let{mode:r,gid:s,uid:n,isFile:i}=A.default.statSync(t);return i()&&(r&1||r&2&&s===process.getgid()||r&4&&n===process.getuid()||r&6&&process.getuid()===0)})(e)}catch{return!1}}});var ae=h(b=>{"use strict";var ie=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});var _=ie(require("fs")),je=ie(ne()),C=D(),ke={mkS:e=>{(0,C.checkPathSync)(e)&&_.default.mkdirSync(e,{recursive:!0})},rmS:e=>{(0,C.checkPathSync)(e)&&(process.versions.node.startsWith("12")?_.default.rmdirSync(e,{recursive:!0}):_.default.rmSync(e,{recursive:!0,force:!0}))},checkS:e=>_.default.existsSync(e),mk:async(e,t)=>{await(0,C.checkPath)(e)&&await _.default.promises.mkdir(e,{recursive:!0}),t==null||t()},rm:async(e,t)=>{await(0,C.checkPath)(e)&&(process.versions.node.startsWith("12")?await _.default.promises.rmdir(e,{recursive:!0}):await _.default.promises.rm(e,{recursive:!0,force:!0})),t==null||t()},check:async(e,t)=>{let r=_.default.existsSync(e);return t==null||t(r),r},nodeModules:e=>(0,je.default)(e)};b.default=ke});var ue=h(T=>{"use strict";var oe=T&&T.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(T,"__esModule",{value:!0});var v=oe(W()),S=oe(F());String.load=v.default.load;String.save=v.default.save;String.loadS=v.default.loadS;String.saveS=v.default.saveS;String.loadW=v.default.loadW;String.saveW=v.default.saveW;String.prototype.save=async function(e,t){await v.default.save(e,String(this),t)};String.prototype.saveS=function(e){v.default.saveS(e,String(this))};String.prototype.saveW=async function(e,t){await v.default.saveW(e,String(this),t)};JSON.load=S.default.load;JSON.save=S.default.save;JSON.loadS=S.default.loadS;JSON.saveS=S.default.saveS;JSON.loadW=S.default.loadW;JSON.saveW=S.default.saveW});var J=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.Buf=exports.File=exports.Dir=exports.Json=void 0;var le=J(Y());exports.Buf=le.default;var x=J(W());exports.File=x.default;var ce=J(F());exports.Json=ce.default;var fe=J(ae());exports.Dir=fe.default;ue();var be=Object.assign({json:ce.default,file:x.default,dir:fe.default,buf:le.default},x.default);exports.default=be;
