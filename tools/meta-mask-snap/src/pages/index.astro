---
import Layout from '@layouts/Layout.astro';
import LearnCard from '@assets/images/LearnCardBanner.png';
import LoadingIndicator from '@components/LoadingIndicator';
import SnapInfo from '@components/SnapInfo';
---

<Layout title="Welcome to Astro.">
    <main class="fixed w-full h-full flex flex-col items-center justify-center bg-green-900">
        <section class="flex flex-col p-4 h-5/6 w-3/4 shadow-2xl border rounded bg-green-50">
            <header class="flex justify-center items-center p-4">
                <img src={LearnCard} alt="Learn Card" />
            </header>
            <section class="p-4 flex-grow overflow-auto border-y">
                <LoadingIndicator client:idle />
                <SnapInfo client:idle />
            </section>
        </section>
    </main>
</Layout>

<script>
    import { isSnapReady } from '@state/snapState';
    import { snapId } from '@constants/snapConstants';

    setTimeout(async () => {
        await ethereum.request({
            method: 'wallet_enable',
            params: [{ wallet_snap: { [snapId]: {} } }],
        });

        isSnapReady.set(true);
    }, 1000);
</script>
