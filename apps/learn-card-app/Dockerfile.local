# Use an official Node runtime as the base image
ARG BASE_IMAGE=learncard-monorepo-local

FROM ${BASE_IMAGE}

# Skip native DIDKit build (not needed for browser apps, uses WASM fallback)
ENV SKIP_DIDKIT_NAPI=1

# Set the working directory in the container
WORKDIR /app

# Expose the port the app runs on
EXPOSE 3000
EXPOSE 4200

# Serve the app
CMD ["sh", "-c", "pnpm exec nx docker-start learn-card-app"]